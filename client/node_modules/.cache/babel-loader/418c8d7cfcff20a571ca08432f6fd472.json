{"ast":null,"code":"import _regeneratorRuntime from\"/home/sushilkumar/Desktop/mernappsocial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sushilkumar/Desktop/mernappsocial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sushilkumar/Desktop/mernappsocial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext,useEffect,useState}from\"react\";import Post from\"../post/Post\";import Share from\"../share/Share\";import\"./feed.css\";import axios from\"axios\";import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Feed(_ref){var username=_ref.username;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!username){_context.next=6;break;}_context.next=3;return axios.get(\"/api/posts/profile/\"+username);case 3:_context.t0=_context.sent;_context.next=9;break;case 6:_context.next=8;return axios.get(\"/api/posts/timeline/\"+user._id);case 8:_context.t0=_context.sent;case 9:res=_context.t0;console.log(\"response from post fetch ::\",res);setPosts(res.data.sort(function(p1,p2){return new Date(p2.createdAt)-new Date(p1.createdAt);}));case 12:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref2.apply(this,arguments);};}();fetchPosts();},[username,user._id]);return/*#__PURE__*/_jsx(\"div\",{className:\"feed\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"feedWrapper\",children:[console.log(posts),(!username||username===user.username)&&/*#__PURE__*/_jsx(Share,{}),console.log(\"Length\",posts.length),console.log(typeof posts),posts.map(function(p){return/*#__PURE__*/_jsx(Post,{post:p},p._id);})]})});}","map":{"version":3,"sources":["/home/sushilkumar/Desktop/mernappsocial/client/src/components/feed/Feed.jsx"],"names":["useContext","useEffect","useState","Post","Share","axios","AuthContext","Feed","username","posts","setPosts","user","fetchPosts","get","_id","res","console","log","data","sort","p1","p2","Date","createdAt","length","map","p"],"mappings":"4eAAA,OAASA,UAAT,CAAqBC,SAArB,CAAgCC,QAAhC,KAAgD,OAAhD,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,gBAAlB,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,2BAA5B,C,wFAEA,cAAe,SAASC,CAAAA,IAAT,MAA4B,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CACzC,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,gBAAiBV,UAAU,CAACM,WAAD,CAA3B,CAAQK,IAAR,aAAQA,IAAR,CAEAV,SAAS,CAAC,UAAM,CACd,GAAMW,CAAAA,UAAU,2FAAG,+IACLJ,QADK,+CAEPH,CAAAA,KAAK,CAACQ,GAAN,CAAU,sBAAwBL,QAAlC,CAFO,qFAGPH,CAAAA,KAAK,CAACQ,GAAN,CAAU,uBAAyBF,IAAI,CAACG,GAAxC,CAHO,yCACXC,GADW,aAIfC,OAAO,CAACC,GAAR,CAAY,6BAAZ,CAA4CF,GAA5C,EACFL,QAAQ,CACNK,GAAG,CAACG,IAAJ,CAASC,IAAT,CAAc,SAACC,EAAD,CAAKC,EAAL,CAAY,CACxB,MAAO,IAAIC,CAAAA,IAAJ,CAASD,EAAE,CAACE,SAAZ,EAAyB,GAAID,CAAAA,IAAJ,CAASF,EAAE,CAACG,SAAZ,CAAhC,CACD,CAFD,CADM,CAAR,CALiB,uDAAH,kBAAVX,CAAAA,UAAU,2CAAhB,CAWAA,UAAU,GACX,CAbQ,CAaN,CAACJ,QAAD,CAAWG,IAAI,CAACG,GAAhB,CAbM,CAAT,CAiBA,mBACE,YAAK,SAAS,CAAC,MAAf,uBACE,aAAK,SAAS,CAAC,aAAf,WACGE,OAAO,CAACC,GAAR,CAAYR,KAAZ,CADH,CAEG,CAAC,CAACD,QAAD,EAAaA,QAAQ,GAAKG,IAAI,CAACH,QAAhC,gBAA6C,KAAC,KAAD,IAFhD,CAGGQ,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAqBR,KAAK,CAACe,MAA3B,CAHH,CAIGR,OAAO,CAACC,GAAR,CAAY,MAAOR,CAAAA,KAAnB,CAJH,CAKGA,KAAK,CAACgB,GAAN,CAAU,SAACC,CAAD,qBACT,KAAC,IAAD,EAAkB,IAAI,CAAEA,CAAxB,EAAWA,CAAC,CAACZ,GAAb,CADS,EAAV,CALH,GADF,EADF,CAaD","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport Post from \"../post/Post\";\nimport Share from \"../share/Share\";\nimport \"./feed.css\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../../context/AuthContext\";\n\nexport default function Feed({ username }) {\n  const [posts, setPosts] = useState([]);\n  const { user } = useContext(AuthContext);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const res = username\n        ? await axios.get(\"/api/posts/profile/\" + username)\n        : await axios.get(\"/api/posts/timeline/\" + user._id);\n        console.log(\"response from post fetch ::\" , res)\n      setPosts(\n        res.data.sort((p1, p2) => {\n          return new Date(p2.createdAt) - new Date(p1.createdAt);\n        })\n      );\n    };\n    fetchPosts();\n  }, [username, user._id]);\n\n\n\n  return (\n    <div className=\"feed\">\n      <div className=\"feedWrapper\">\n        {console.log(posts)}\n        {(!username || username === user.username) && <Share />}\n        {console.log(\"Length\",posts.length)}\n        {console.log(typeof(posts))}\n        {posts.map((p) => (\n          <Post key={p._id} post={p} />\n        ))}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}