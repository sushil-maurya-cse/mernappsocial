{"ast":null,"code":"import _regeneratorRuntime from\"/home/sushilkumar/Desktop/mernappsocial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sushilkumar/Desktop/mernappsocial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sushilkumar/Desktop/mernappsocial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./rightbar.css\";import{Users}from\"../../dummyData\";import Online from\"../online/Online\";import{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import{Add,Remove}from\"@material-ui/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Rightbar(_ref){var user=_ref.user;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),friends=_useState2[0],setFriends=_useState2[1];var _useContext=useContext(AuthContext),currentUser=_useContext.user,dispatch=_useContext.dispatch;var _useState3=useState(currentUser.followings.includes(user===null||user===void 0?void 0:user.id)),_useState4=_slicedToArray(_useState3,2),followed=_useState4[0],setFollowed=_useState4[1];useEffect(function(){var getFriends=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var friendList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/users/friends/\"+user._id);case 3:friendList=_context.sent;setFriends(friendList.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getFriends(){return _ref2.apply(this,arguments);};}();getFriends();},[user]);var handleClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!followed){_context2.next=7;break;}_context2.next=4;return axios.put(\"/users/\".concat(user._id,\"/unfollow\"),{userId:currentUser._id});case 4:dispatch({type:\"UNFOLLOW\",payload:user._id});_context2.next=10;break;case 7:_context2.next=9;return axios.put(\"/users/\".concat(user._id,\"/follow\"),{userId:currentUser._id});case 9:dispatch({type:\"FOLLOW\",payload:user._id});case 10:setFollowed(!followed);_context2.next=15;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,13]]);}));return function handleClick(){return _ref3.apply(this,arguments);};}();var HomeRightbar=function HomeRightbar(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"birthdayContainer\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"birthdayImg\",src:\"assets/gift.png\",alt:\"\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"birthdayText\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Pola Foster\"}),\" and \",/*#__PURE__*/_jsx(\"b\",{children:\"3 other friends\"}),\" have a birhday today.\"]})]}),/*#__PURE__*/_jsx(\"img\",{className:\"rightbarAd\",src:\"assets/ad.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"rightbarTitle\",children:\"Online Friends\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"rightbarFriendList\",children:Users.map(function(u){return/*#__PURE__*/_jsx(Online,{user:u},u.id);})})]});};var ProfileRightbar=function ProfileRightbar(){return/*#__PURE__*/_jsxs(_Fragment,{children:[user.username!==currentUser.username&&/*#__PURE__*/_jsxs(\"button\",{className:\"rightbarFollowButton\",onClick:handleClick,children:[followed?\"Unfollow\":\"Follow\",followed?/*#__PURE__*/_jsx(Remove,{}):/*#__PURE__*/_jsx(Add,{})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"rightbarTitle\",children:\"User information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfoItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoKey\",children:\"City:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoValue\",children:user.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfoItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoKey\",children:\"From:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoValue\",children:user.from})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfoItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoKey\",children:\"Relationship:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoValue\",children:user.relationship===1?\"Single\":user.relationship===1?\"Married\":\"-\"})]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"rightbarTitle\",children:\"User friends\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rightbarFollowings\",children:friends.map(function(friend){return/*#__PURE__*/_jsx(Link,{to:\"/profile/\"+friend.username,style:{textDecoration:\"none\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarFollowing\",children:[/*#__PURE__*/_jsx(\"img\",{src:friend.profilePicture?PF+friend.profilePicture:PF+\"person/noAvatar.png\",alt:\"\",className:\"rightbarFollowingImg\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarFollowingName\",children:friend.username})]})});})})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"rightbar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rightbarWrapper\",children:user?/*#__PURE__*/_jsx(ProfileRightbar,{}):/*#__PURE__*/_jsx(HomeRightbar,{})})});}","map":{"version":3,"sources":["/home/sushilkumar/Desktop/mernappsocial/client/src/components/rightbar/Rightbar.jsx"],"names":["Users","Online","useContext","useEffect","useState","axios","Link","AuthContext","Add","Remove","Rightbar","user","PF","process","env","REACT_APP_PUBLIC_FOLDER","friends","setFriends","currentUser","dispatch","followings","includes","id","followed","setFollowed","getFriends","get","_id","friendList","data","console","log","handleClick","put","userId","type","payload","HomeRightbar","map","u","ProfileRightbar","username","city","from","relationship","friend","textDecoration","profilePicture"],"mappings":"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","sourcesContent":["import \"./rightbar.css\";\nimport { Users } from \"../../dummyData\";\nimport Online from \"../online/Online\";\nimport { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { Add, Remove } from \"@material-ui/icons\";\n\nexport default function Rightbar({ user }) {\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const [friends, setFriends] = useState([]);\n  const { user: currentUser, dispatch } = useContext(AuthContext);\n  const [followed, setFollowed] = useState(\n    currentUser.followings.includes(user?.id)\n  );\n\n  useEffect(() => {\n    const getFriends = async () => {\n      try {\n        const friendList = await axios.get(\"/api/users/friends/\" + user._id);\n        setFriends(friendList.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getFriends();\n  }, [user]);\n\n  const handleClick = async () => {\n    try {\n      if (followed) {\n        await axios.put(`/users/${user._id}/unfollow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"UNFOLLOW\", payload: user._id });\n      } else {\n        await axios.put(`/users/${user._id}/follow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"FOLLOW\", payload: user._id });\n      }\n      setFollowed(!followed);\n    } catch (err) {\n    }\n  };\n\n  const HomeRightbar = () => {\n    return (\n      <>\n        <div className=\"birthdayContainer\">\n          <img className=\"birthdayImg\" src=\"assets/gift.png\" alt=\"\" />\n          <span className=\"birthdayText\">\n            <b>Pola Foster</b> and <b>3 other friends</b> have a birhday today.\n          </span>\n        </div>\n        <img className=\"rightbarAd\" src=\"assets/ad.png\" alt=\"\" />\n        <h4 className=\"rightbarTitle\">Online Friends</h4>\n        <ul className=\"rightbarFriendList\">\n          {Users.map((u) => (\n            <Online key={u.id} user={u} />\n          ))}\n        </ul>\n      </>\n    );\n  };\n\n  const ProfileRightbar = () => {\n    return (\n      <>\n        {user.username !== currentUser.username && (\n          <button className=\"rightbarFollowButton\" onClick={handleClick}>\n            {followed ? \"Unfollow\" : \"Follow\"}\n            {followed ? <Remove /> : <Add />}\n          </button>\n        )}\n        <h4 className=\"rightbarTitle\">User information</h4>\n        <div className=\"rightbarInfo\">\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">City:</span>\n            <span className=\"rightbarInfoValue\">{user.city}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">From:</span>\n            <span className=\"rightbarInfoValue\">{user.from}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">Relationship:</span>\n            <span className=\"rightbarInfoValue\">\n              {user.relationship === 1\n                ? \"Single\"\n                : user.relationship === 1\n                ? \"Married\"\n                : \"-\"}\n            </span>\n          </div>\n        </div>\n        <h4 className=\"rightbarTitle\">User friends</h4>\n        <div className=\"rightbarFollowings\">\n          {friends.map((friend) => (\n            <Link\n              to={\"/profile/\" + friend.username}\n              style={{ textDecoration: \"none\" }}\n            >\n              <div className=\"rightbarFollowing\">\n                <img\n                  src={\n                    friend.profilePicture\n                      ? PF + friend.profilePicture\n                      : PF + \"person/noAvatar.png\"\n                  }\n                  alt=\"\"\n                  className=\"rightbarFollowingImg\"\n                />\n                <span className=\"rightbarFollowingName\">{friend.username}</span>\n              </div>\n            </Link>\n          ))}\n        </div>\n      </>\n    );\n  };\n  return (\n    <div className=\"rightbar\">\n      <div className=\"rightbarWrapper\">\n        {user ? <ProfileRightbar /> : <HomeRightbar />}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}