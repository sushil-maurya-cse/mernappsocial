{"ast":null,"code":"import _regeneratorRuntime from\"/home/sushilkumar/Desktop/mernappsocial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sushilkumar/Desktop/mernappsocial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sushilkumar/Desktop/mernappsocial/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./share.css\";import{PermMedia,Label,Room,EmojiEmotions,Cancel}from\"@material-ui/icons\";import{useContext,useRef,useState,useEffect}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import axios from\"axios\";import{useParams}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Share(){var _useContext=useContext(AuthContext),user=_useContext.user;var username=useParams().username;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var desc=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];// const [profUSer, setProfUser] = useState({})\n// useEffect(() => {\n//   const fetchUser = async () => {\n//     const res = await axios.get(`/users?username=${username}`);\n//     setProfUser(res.data);\n//   };\n//   fetchUser();\n// }, true)\nvar submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newPost,data,fileName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={userId:user._id,desc:desc.current.value};if(!file){_context.next=21;break;}data=new FormData();console.log(\"Data :: \");console.log(data);fileName=Date.now()+file.name;console.log(\"filename : \");console.log(fileName);data.append(\"name\",fileName);data.append(\"file\",file);console.log(data);newPost.img=fileName;console.log(newPost);_context.prev=14;_context.next=17;return axios.post(\"/api/upload\",data);case 17:_context.next=21;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](14);case 21:_context.prev=21;_context.next=24;return axios.post(\"/api/posts\",newPost);case 24:window.location.reload();_context.next=29;break;case 27:_context.prev=27;_context.t1=_context[\"catch\"](21);case 29:case\"end\":return _context.stop();}}},_callee,null,[[14,19],[21,27]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"share\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"shareWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareTop\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"shareProfileImg\",src:user.profilePicture?PF+user.profilePicture:PF+\"person/noAvatar.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's in your mind \"+user.username+\"?\",className:\"shareInput\",ref:desc})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"shareHr\"}),file&&/*#__PURE__*/_jsxs(\"div\",{className:\"shareImgContainer\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"shareImg\",src:URL.createObjectURL(file),alt:\"\"}),/*#__PURE__*/_jsx(Cancel,{className:\"shareCancelImg\",onClick:function onClick(){return setFile(null);}})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"shareBottom\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareOptions\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",className:\"shareOption\",children:[/*#__PURE__*/_jsx(PermMedia,{htmlColor:\"tomato\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Photo or Video\"}),/*#__PURE__*/_jsx(\"input\",{style:{display:\"none\"},type:\"file\",id:\"file\",accept:\".png,.jpeg,.jpg\",onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Label,{htmlColor:\"blue\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Tag\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Room,{htmlColor:\"green\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Location\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(EmojiEmotions,{htmlColor:\"goldenrod\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Feelings\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"shareButton\",type:\"submit\",children:\"Share\"})]})]})});}","map":{"version":3,"sources":["/home/sushilkumar/Desktop/mernappsocial/client/src/components/share/Share.jsx"],"names":["PermMedia","Label","Room","EmojiEmotions","Cancel","useContext","useRef","useState","useEffect","AuthContext","axios","useParams","Share","user","username","PF","process","env","REACT_APP_PUBLIC_FOLDER","desc","file","setFile","submitHandler","e","preventDefault","newPost","userId","_id","current","value","data","FormData","console","log","fileName","Date","now","name","append","img","post","window","location","reload","profilePicture","URL","createObjectURL","display","target","files"],"mappings":"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","sourcesContent":["import \"./share.css\";\nimport {\n  PermMedia,\n  Label,\n  Room,\n  EmojiEmotions,\n  Cancel,\n} from \"@material-ui/icons\";\nimport { useContext, useRef, useState, useEffect } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router\";\n\nexport default function Share() {\n  const { user } = useContext(AuthContext);\n  const username = useParams().username;\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const desc = useRef();\n  const [file, setFile] = useState(null);\n  // const [profUSer, setProfUser] = useState({})\n\n  // useEffect(() => {\n  //   const fetchUser = async () => {\n  //     const res = await axios.get(`/users?username=${username}`);\n  //     setProfUser(res.data);\n  //   };\n  //   fetchUser();\n  // }, true)\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    const newPost = {\n      userId: user._id,\n      desc: desc.current.value,\n    };\n    if (file) {\n      const data = new FormData();\n      console.log(\"Data :: \");\n      console.log(data);\n      const fileName = Date.now() + file.name;\n      console.log(\"filename : \")\n      console.log(fileName)\n      data.append(\"name\", fileName);\n      data.append(\"file\", file);\n      console.log(data);\n      newPost.img = fileName;\n      console.log(newPost);\n      try {\n        await axios.post(\"/api/upload\", data);\n      } catch (err) { }\n    }\n    try {\n      await axios.post(\"/api/posts\", newPost);\n      window.location.reload();\n    } catch (err) { }\n  };\n\n  return (\n    <div className=\"share\">\n      <div className=\"shareWrapper\">\n        <div className=\"shareTop\">\n          <img\n            className=\"shareProfileImg\"\n            src={\n              user.profilePicture\n                ? PF + user.profilePicture\n                : PF + \"person/noAvatar.png\"\n            }\n            alt=\"\"\n          />\n          <input\n            placeholder={\"What's in your mind \" + user.username + \"?\"}\n            className=\"shareInput\"\n            ref={desc}\n          />\n        </div>\n        <hr className=\"shareHr\" />\n        {file && (\n          <div className=\"shareImgContainer\">\n            <img className=\"shareImg\" src={URL.createObjectURL(file)} alt=\"\" />\n            <Cancel className=\"shareCancelImg\" onClick={() => setFile(null)} />\n          </div>\n        )}\n        <form className=\"shareBottom\" onSubmit={submitHandler}>\n          <div className=\"shareOptions\">\n            <label htmlFor=\"file\" className=\"shareOption\">\n              <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Photo or Video</span>\n              <input\n                style={{ display: \"none\" }}\n                type=\"file\"\n                id=\"file\"\n                accept=\".png,.jpeg,.jpg\"\n                onChange={(e) => setFile(e.target.files[0])}\n              />\n            </label>\n            <div className=\"shareOption\">\n              <Label htmlColor=\"blue\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Tag</span>\n            </div>\n            <div className=\"shareOption\">\n              <Room htmlColor=\"green\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Location</span>\n            </div>\n            <div className=\"shareOption\">\n              <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Feelings</span>\n            </div>\n          </div>\n          <button className=\"shareButton\" type=\"submit\">\n            Share\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}